__require=function i(t,e,s){function r(h,n){if(!e[h]){if(!t[h]){var c=h.split("/");if(c=c[c.length-1],!t[c]){var d="function"==typeof __require&&__require;if(!n&&d)return d(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+h+"'")}}var a=e[h]={exports:{}};t[h][0].call(a.exports,function(i){return r(t[h][1][i]||i)},a,a.exports,i,t,e,s)}return e[h].exports}for(var o="function"==typeof __require&&__require,h=0;h<s.length;h++)r(s[h]);return r}({game:[function(i,t,e){"use strict";cc._RF.push(t,"cf336cEAD1Nr4xwRdns1EnF","game"),cc.Class({extends:cc.Component,properties:{ground:{default:null,type:cc.Node},bird:{default:null,type:cc.Node},background:{default:null,type:cc.Node},pillar1:{default:null,type:cc.Node},pillar2:{default:null,type:cc.Node},scoreDisplay:{default:null,type:cc.Label},button:{default:null,type:cc.Node},title:{default:null,type:cc.Node},backGroundAudio:{default:null,type:cc.AudioClip},jumpAudio:{default:null,type:cc.AudioClip},lastScore:{default:null,type:cc.Label},bestScore:{default:null,type:cc.Label}},initData:function(){this.button.active=!1,this.scoreDisplay.node.active=!1,this.title.active=!0,this.fpscount=0,this.bird.isprepared=!1,this.isGameOver=!1,this.firstTimeEnd=!0,this.score=0,this.groundSpeed=4,this.birdFloatSpeed=.5,this.current=cc.audioEngine.play(this.backGroundAudio,!0,1),this.pillar1.y=700*Math.random()-280,this.pillar2.y=700*Math.random()-280},onLoad:function(){this.initData(),this.node.on(cc.Node.EventType.TOUCH_START,this.touchFunction,this),this.button.on("click",this.buttonClick,this)},touchFunction:function(){this.bird.stopAllActions(),this.jumpAction=this.setJumpAction(),this.bird.isprepared=!0,this.bird.runAction(this.jumpAction)},buttonClick:function(){cc.director.loadScene("game")},setJumpAction:function(){this.bird.jumpHeight=120,this.bird.jumpDuraction=.3,this.bird.jumpRotation=-15,this.bird.dropTurnDuration=.2,this.bird.dropDownDuration=1.3,this.bird.dropRotation=90;var i=(this.bird.y+this.node.height/2)/(this.node.height-this.ground.height)*this.bird.dropDownDuration,t=cc.moveBy(this.bird.jumpDuraction,cc.v2(0,this.bird.jumpHeight)),e=cc.rotateTo(0,this.bird.jumpRotation),s=cc.moveBy(this.bird.jumpDuraction,cc.v2(0,-this.bird.jumpHeight)),r=cc.rotateTo(this.bird.dropTurnDuration,this.bird.dropRotation),o=cc.moveTo(i,this.bird.x,this.ground.height-this.node.height/2),h=cc.callFunc(this.playJumpSound,this);return this.bird.spawn=cc.spawn(r,o),cc.sequence(e,h,t,s,this.bird.spawn)},playJumpSound:function(){cc.audioEngine.playEffect(this.jumpAudio,!1)},groundMove:function(){this.ground.x-=this.groundSpeed,this.ground.x<=-420&&(this.ground.x=-360)},birdFloat:function(){this.fpscount%40<20?this.bird.y+=this.birdFloatSpeed:this.bird.y-=this.birdFloatSpeed,this.fpscount+=1},pillarMove:function(){this.pillar1.x-=this.groundSpeed,this.pillar2.x-=this.groundSpeed,this.pillar1.x<=-(this.node.width/2+this.pillar1.width/2)&&(this.pillar1.x=this.node.width/2+this.pillar1.width/2,this.pillar1.y=700*Math.random()-280),this.pillar2.x<=-(this.node.width/2+this.pillar1.width/2)&&(this.pillar2.x=this.node.width/2+this.pillar1.width/2,this.pillar2.y=700*Math.random()-280),this.getScore()&&(this.score+=1,this.scoreDisplay.string="Score: "+this.score)},getScore:function(){var i=this.bird.x-(this.pillar1.width+this.bird.width)/2;return this.pillar1.x<=i&&this.pillar1.x>i-this.groundSpeed||(this.pillar2.x<=i&&this.pillar2.x>i-this.groundSpeed||void 0)},isGameOverFun:function(){var i=this.bird.y<=-470||this.bird.y>=1e3,t=Math.abs(this.bird.y-this.pillar1.y)>this.pillar1.height/2-this.bird.height/2,e=Math.abs(this.pillar1.x-this.bird.x)<this.bird.width/2+this.pillar1.width/2,s=t&&e,r=Math.abs(this.bird.y-this.pillar2.y)>this.pillar1.height/2-this.bird.height/2,o=Math.abs(this.pillar2.x-this.bird.x)<this.bird.width/2+this.pillar2.width/2;if(i||s||r&&o)return!0},gameOver:function(){this.bird.getComponent(cc.Animation).stop(),this.setScore(),this.node.off(cc.Node.EventType.TOUCH_START,this.touchFunction,this),this.bird.stopAllActions(),cc.audioEngine.stop(this.current);var i=cc.callFunc(function(){this.button.active=!0},this),t=cc.sequence(this.bird.spawn,i);this.bird.runAction(t)},setScore:function(){this.scoreDisplay.node.active=!1,this.lastScore.string=this.score,console.log(cc.sys.localStorage.getItem("bestScore")),this.score>cc.sys.localStorage.getItem("bestScore")&&cc.sys.localStorage.setItem("bestScore",this.score),cc.sys.localStorage.getItem("bestScore")&&(this.bestScore.string=cc.sys.localStorage.getItem("bestScore"))},update:function(i){0==this.bird.isprepared&&this.birdFloat(),1==this.bird.isprepared&&(this.title.active=!1),1==this.bird.isprepared&&0==this.isGameOver&&(this.scoreDisplay.node.active=!0,this.groundMove(),this.pillarMove()),this.isGameOverFun()&&(this.isGameOver=!0,1==this.firstTimeEnd&&(this.gameOver(),this.firstTimeEnd=!1))}}),cc._RF.pop()},{}]},{},["game"]);